<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Test Page</title>
</head>

<body>
    <button onclick="handelClick()">click here to test debounce</button>
</body>

<script>
    function debounce(func, delay) {
        // 一个setTimeout对象的签名（初始值应该为undefined）
        var timer;
        return function () {
            // timer不是空的情况下，说明执行过 "timer = window.setTimeout(func, delay);" 这行代码
            // 这意味着本函数被调用过一次
            if (timer) {
                // 在上面的情况之后，每次调用都会使setTimeout对象的延时复位
                window.clearTimeout(timer);
            }
            // 设置延迟delay事件后执行
            timer = window.setTimeout(func, delay);
        }
    }
    // 所有的调用过程都是用一个debounce控制
    var handelClick = debounce(function () { console.log('hello') }, 1000);
</script>

</html>