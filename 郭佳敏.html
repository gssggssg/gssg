<template>
  <div  class=“show-examples”>

      <div class="title">社团&活动>社团管理</div><br>

      <el-table
          :data="list.table"
          style="width: 100%"
          border
          row-key="id"
          :tree-props="{children: 'children',hasChildren: 'hasChildren'}"
      >

          <el-table-column
              prop="id"
              label="id"
              align="center">
          </el-table-column>

          <el-table-column
              prop="id"
              label="社团名称"
              align="center">
          </el-table-column>

          <el-table-column
              label="社长姓名"
              prop="nick"
              align="center">
          </el-table-column>

          <el-table-column
              prop="mobile"
              label="手机号"
              align="center">
          </el-table-column>

          <el-table-column
              prop="name"
              align="center"
              label="社长所在学校" >
          </el-table-column>

          <el-table-column
              prop="region"
              align="center"
              label="城市" >
          </el-table-column>

          <el-table-column
              prop="created_at"
              align="center"
              label="提交审核时间" >
          </el-table-column>

          <el-table-column
              prop="status"
              align="center"
              label="状态" >
          </el-table-column>

          <el-table-column label="操作"  width="150" align="center">
              <button @click="cimsInputClick" >查看</button>&nbsp;
              <button @click="remove(index)">删除</button>
          </el-table-column>

      </el-table>
  </div>
</template>

<script>
import {clubList} from "../axios/api";
import { reactive } from "vue";
export default {
  name: 'show-examples',
  setup(){
      let list = reactive({
          table: [],
      });
      return{
          list
      }
  },
  mounted(){
      this.getList()
  },
  methods: {
      getList(){
          clubList(this.contents).then(res => {
              console.log(res);

              this.list.table = res.list
              console.log(res.list.length)

              for(let i = 0; i < res.list.length; i++){
                  Object.assign(this.list.table[i] ,this.list.table[i].school);
              }
              console.log(this.list.table)
          })

      },
      remove: function (index) {
          this.list.splice(index, 1)
      },
      cimsInputClick: function () {
          window.location.href = '../admin/details'
      },
  }
}
</script>
<!-- Add "scoped" attribute to limit CSS to this component only -->

<style >
.title {
  width:100%;
  margin:15px 0;
  border:0;
}
button{
  width: 45px;
  height: 25px;
  color:green;
  background-color: aliceblue;
  text-align: center;
  border-radius: 10px;
  border: none;
}

</style>